{% set reminder_tasks = context.tasks | selectattr("type", "equalto", "REMINDER") | list %}
{% if reminder_tasks %}
Reminders by status (meaning in parentheses):
{% set status_descriptions = {
  "NOT_STARTED": "Still needs attention.",
  "READY": "Still needs attention.",
  "PENDING": "Still needs attention.",
  "COMPLETE": "Already done.",
  "PUNT": "Intentionally deferred; do not notify, included only as context."
} %}
{% for status in ["NOT_STARTED", "READY", "PENDING", "COMPLETE", "PUNT"] %}
{% set items = reminder_tasks | selectattr("status", "equalto", status) | list %}
{% if items %}
{{ status }} ({{ status_descriptions.get(status, status) }}):
{% for reminder in items %}
{% include "components/reminders/item.j2" %}
{% endfor %}
{% endif %}
{% endfor %}
{% endif %}
